# 选择题 (20*2)
## 选择题考点
- 第一章 3
    - 八大原则 1.5
    - 性能计算
    - 功耗墙 1
- 第二章 5
    - 指令格式 1.5
    - 逻辑操作 1
    - 过程 1
    - 寻址 1
    - 编译和执行 1
- 第三章 2
    - 整数运算及溢出 1
    - 浮点数表示 3选1
- 第四章 5
    - 单周期CPU数据通路
    - 流水线
        - 周期 1
        - 数据通路 1
        - 控制
    - 流水线中的竞争冒险
        - 数据冒险 1
        - 控制冒险 1
    - 异常 1
- 第五章 5
    - 存储器技术 1
    - Cache 1
    - 多级cache
        - 读写和性能计算 1
        - 一致性 0
    - 可信存储器层次
        - 汉明码：一位错/两位错 1

## 1

计算机系统结构中的八个伟大思想在我们身边随处可见，将八个伟大思想和身边的案例匹配，下列组合正确的是()：
||八大原则思想|身边案例|
|-|-|-|
|①|加速大概率事件|对同一人群多次进行核酸检测|
|②|采用预测提高性能|信息东楼装了三个电梯|
|③|通过冗余提高可信性|食堂根据星期决定做饭量|
|④|采用并行提高性能|男厕占地面积较小的小便池|

- A ①②③④对应③④②①
- B ①②③④对应③④①②
- C ①②③④对应④③①②
- D ①②③④对应④③②①

```
考点：第一章-八大原则
答案：C
解析：根据答案对应
```

## 2

抽象是改进设计的伟大思想之一，最重要的抽象之一是“指令集体系结构(ISA)”，下列对该抽象描述正确的是()：

- A 是指高级语言和机器语言之间的接口
- B 是指硬件和底层软件之间的接口
- C 仅包括各种指令(add,sub,jr等)
- D 尽管各种计算机技术(集成电路逻辑技术、半导体DRAM等)在快速发展，但ISA作为一种抽象不需要对这些考虑太多

```
考点：第一章-八大思想-抽象、第二章-指令集体系结构(ISA)
答案：B
解析：参考课本P15。对D选项，快速发展的计算机技术左右着计算机设计的命运，由于计算速度的激增和技术的迅猛发展，一种计算机设计的寿命可能只有3-5年。
```

## 3 

下面哪个不是影响功耗墙的因素?

- A 指令集
- B 电容
- C 电压
- D 频率

```
考点：第一章-功耗墙
答案：A
解析：影响功耗的因素有负载电容、电压和开关频率
```

## 4 重复

假设如下寄存器内容：
`$t0 = 0xAAAAAAAA`, `$t1 = 0x12345678`
对于以上的寄存器内容，执行下面的指令序列后$t2的值是多少？
```mips
sll $t2, $t0, 4
or  $t2, $t2, $t1
```
- A 0xBABEFFE8
- B 0xBABBEEF8
- C 0xBABEFEF8
- D 0xBABEEEF8

```
考点：第二章-MIPS汇编语言指令的具体含义及计算
答案：C
解析：
sll $t2, $t0, 4   -> $t2 = $t0 << 4
or  $t2, $t2, $t1 -> $t2 = $t2 | $t1
计算可得
```

## 5

以下关于算术移位和逻辑移位的描述错误的是()
- A 逻辑左移时，高位丢失，低位补0
- B 算术左移相当于对原数乘2
- C 逻辑右移相当于对原数除2
- D 算术右移时，符号位不变并向高位复制

```
考点：第二章-逻辑运算
答案：C
解析：
```

## 6

考虑以下的C++代码，以下说法错误的是()
```C++
#include <iostream>
using namespace std;
int N=1;              ①
int func(int* a);
int main()
{
    int *p;
    p = new int (10); ②
    func(p);          ③
    return 0;         ④
}
```
- A 栈自高地址向低地址生长，动态数据段自低地址向高地址生长，这样的结构安排可以充分地利用内存空间
- B 语句①中的数据N将被存于静态数据段中，②中数据存于动态数据段中
- C 语句③使main函数跳转向func函数，调用过程中将使用jr指令
- D 在③中的函数调用返回时，\$fp一般保持不变而\$sp一般逐渐减小

```
考点：第二章-过程
答案：C
解析：应是jal指令，因为jal可以将当前指令的下一条指令的地址存储到\$ra中，并跳转到指令地址，而jr无此功能。所以使用jal指令调用过程，使用jr指令返回
```

## 7

下面哪种寻址方式能够一次性访问内存中字节地址为15A56B0A至15A56B0D的内容

- A 寄存器寻址
- B 基址寻址
- C PC相对寻址
- D 伪直接寻址

```
考点：第二章-寻址
答案：C
解析：这段内存是跨了两个字的四个字节。寄存器寻址查找寄存器而非内存，PC相对寻址和伪直接寻址都是按字寻址，只有基址寻址是按字节寻址
```

## 8

一个C语言程序转换为可执行程序从逻辑上讲需要四个步骤：编译--汇编--链接--加载，下列关于这四个步骤描述错误的是()

- A 编译是将高级语言转换成一种机器能理解的符号形式的汇编语言
- B 链接是将各种代码和数据片段收集并组合成为一个单一文件的过程，这个过程既可以执行于编译时，又可以执行于加载时，但不可执行于运行时
- C 程序经加载后可直接运行
- D 重定位信息是由汇编器生成的

```
考点：第二章-翻译并执行程序
答案：B
解析：链接分为动态链接和静态链接，其中动态链接发生在运行阶段
```

## 9 解析
假定有4个整数，用8位补码分别表示：r1=FEH, r2=F2H, r3=90H, r4=F8H, 若将运算结果存放在一个8位寄存器中，则下列运算会发生溢出的是()
- A r1 * r2
- B r2 * r3
- C r1 * r4
- D r2 * r4

```
考点：第三章-整数运算和溢出
答案：B
解析：
```

## 10

假定一8位的浮点格式，其中有k = 4的阶码位和n = 3的小数位。偏移量为$2^3-1=7$，则最小的规格化数（正数）为()

- A 0.0312500 (1/32)
- B 0.0156250 (1/64)
- C 0.0078125 (1/128)
- D 0.0000000 (0)

```
考点：第三章-浮点数表示
答案：B
解析：考虑是正数，因此符号位为0；规格化数的指数位不为0，最小为1，此时指数为-6；尾数最小为0。0 0001 000 = 1/64
```

## 11

下面给出流水线中数据通路中不同阶段的延迟情况：
|IF|ID|EX|MEM|WB|
|-|-|-|-|-|
|250ps|350ps|150ps|300ps|200ps|
对于流水线处理器与非流水线处理器，时钟周期分别至少为()

- A 300ps, 1250ps
- B 350ps, 1150ps
- C 300ps, 1150ps
- D 350ps, 1250ps

```
考点：第四章-周期
答案：D
解析：流水线中的时钟周期是数据通路中时间最长的阶段的时间，而非流水线处理器的时钟周期是各阶段时间相加
```

## 12 C

关于流水线数据通路，下列说法正确的是()

- A 对存储器的访问发生在MEM阶段
- B PC寄存器的内容每个周期必定变化一次
- C （流水线间寄存器）
- D 符号扩展电路每个周期都在工作

```
考点：第四章-流水线数据通路
答案：D
解析：对数据存储器的访问发生在MEM阶段，对指令存储器的访问发生在IF和WB阶段；对于跳向自身的指令，PC寄存器的值不发生改变；；符号扩展电路一直在工作，只是结果是否被使用的问题
```

# 计算题
## 1 改第二问
`考察范围：第一、二章`
考虑用一段C语言程序和它编译为MIPS指令的版本，其中array为长度为len的int类型数组，array的首地址已保存在$s0中，len保存已在$s1中，回答下列问题
```C
int f1(int arg){
    if(arg>=0 && arg<len)
        return array[arg];
    else return 0;
}

void f2(int arg){
    for(int i=-arg; i<=arg; i++)
        f1(i);
}
```

```mips
f1:
    addi $sp, $sp, -8
    sw   $a0, 4($sp)
    sw   $ra, 0($sp)
    # (1)
    beq  $t0, $zero, else
    # (2)
    j    rtn
else:
    add  $v0, $zero, $zero
rtn:
    lw   $ra, 0($sp)
    lw   $a0, 4($sp)
    addi $sp, $sp, 8
    jr   $ra

f2:
    addi $sp, $sp, -8
    sw   $ra, 4($sp)
    sw   $a0, 0($sp)
    # (3)
loop:
    jal  f1
    addi $t0, $t0, 1
    slt  $t1, $a0, $t0
    beq  $t1, $zero, loop
    lw   $a0, 0($sp)
    lw   $ra, 4($sp)
    addi $sp, $sp, 8
    jr   $ra
```

1. 完成这段MIPS汇编语言代码，要求执行的指令条数尽可能优化
```
(1)
sltu $t0, $a0, $s1
(2)
sll  $t0, $s1, 2
add  $t0, $s0, $t1
lw   $v0, 0($t0)
(3)
sub $t0, $zero, $a0
```

2. x为整数且|x|\<len，计算调用f2(x)需要执行的指令条数
```
设考生答案中三个空的指令条数为a、b、c，如参考答案写法中a=1，b=3，c=1
f1(x)在x未出界时需要执行9+a+b条，出界时需要执行9+a条
考虑|x|<len，因此x<0时出界，x>0时不出界
f2(x)需要执行7+c+(9+a+4)x+(9+a+b+4)(x+1)=20+a+b+c+(26+2a+b)x
如参考答案写法中该式为25+31x
```
